{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47379465-d19c322484d0cfa984d66258f';\n\nexport const searchParams = async (query, page = 1) => {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 150,\n  });\n\n  try {\n    const response = await axios(`https://pixabay.com/api/?${params}`);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const useError = message => {\n  iziToast.error({\n    message,\n    messageColor: '#fafafb',\n    backgroundColor: '#ef4040',\n  });\n};\n\nexport const checkGallery = (gallery, images) => {\n  if (images.length === 0) {\n    useError(\n      'Sorry, there are no images matching your search query. Please, try again!'\n    );\n    return;\n  }\n\n  gallery.insertAdjacentHTML('beforeend', createMarkup(images));\n};\n\nconst createMarkup = arr => {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">   \n      <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\"/>\n      </a>\n      <div class=\"container\">\n      <p class=\"facts-container\">\n      Likes\n    <span class=\"facts-span\">${likes}</span></p> \n      <p class=\"facts-container\">\n      Views\n    <span class=\"facts-span\">${views}</span></p>\n      <p class=\"facts-container\">\n      Comments\n    <span class=\"facts-span\">${comments}</span></p>\n      <p class=\"facts-container\">\n      Downloads\n    <span class=\"facts-span\">${downloads}</span></p>\n      </div>\n      </li>\n    `\n    )\n    .join('');\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { searchParams } from './js/pixabay-api';\nimport { checkGallery, useError } from './js/render-functions';\n\nconst form = document.querySelector('.js-form');\nconst gallery = document.querySelector('.gallery');\nconst search = document.querySelector('.form-search');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\nconst endGallery = document.querySelector('.facts-span');\n\nlet query = '';\nlet page = 1;\nlet lightbox;\n\nform.addEventListener('submit', handlerSearch);\nloadMoreBtn.addEventListener('click', loadMorePictures);\n\nasync function handlerSearch(event) {\n  event.preventDefault();\n  query = search.value.trim();\n\n  if (!query) return;\n\n  search.value = '';\n  page = 1;\n  loader.style.display = 'inline';\n  endGallery.textContent = '';\n\n  try {\n    const data = await searchParams(query, page);\n    gallery.innerHTML = '';\n\n    checkGallery(gallery, data.hits);\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.gallery a');\n    } else {\n      lightbox.refresh();\n    }\n\n    if (data.hits.length < data.totalHits) {\n      loadMoreBtn.classList.remove('load-more-hidden');\n    } else {\n      loadMoreBtn.classList.add('load-more-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n    useError(\n      'Sorry, there are no images matching your search query. Please, try again!'\n    );\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nasync function loadMorePictures() {\n  page += 1;\n  loader.style.display = 'inline';\n\n  try {\n    const data = await searchParams(query, page);\n\n    if (!data.hits || data.hits.length === 0) {\n      loadMoreBtn.classList.add('load-more-hidden');\n      endGallery.textContent =\n        \"We're sorry, but you've reached the end of search results.\";\n      return;\n    }\n\n    checkGallery(gallery, data.hits);\n    lightbox.refresh();\n\n    if (gallery.children.length >= data.totalHits) {\n      loadMoreBtn.classList.add('load-more-hidden');\n      endGallery.textContent =\n        \"We're sorry, but you've reached the end of search results.\";\n    } else {\n      loadMoreBtn.classList.remove('load-more-hidden');\n      endGallery.textContent = '';\n    }\n\n    const galleryItems = document.querySelectorAll('.gallery-item');\n\n    const itemHeight =\n      galleryItems[\n        galleryItems.length - data.hits.length\n      ].getBoundingClientRect().height;\n\n    window.scrollBy({\n      left: 0,\n      top: itemHeight * 1.2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    useError(\n      'Sorry, there are no images matching your search query. Please, try again!'\n    );\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n"],"names":["API_KEY","searchParams","query","page","params","axios","error","useError","message","iziToast","checkGallery","gallery","images","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","search","loader","loadMoreBtn","endGallery","lightbox","handlerSearch","loadMorePictures","event","data","SimpleLightbox","galleryItems","itemHeight"],"mappings":"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"}